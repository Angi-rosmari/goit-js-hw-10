{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'flatpickr/dist/themes/dark.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate;\nlet timeRange;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onReady: function (selectedDates, dateStr, instance) {\n    instance.input.value = 'Select date';\n  },\n\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    timeRange = userSelectedDate.getTime() - new Date().getTime();\n\n    if (timeRange <= 0) {\n      startButton.disabled = true;\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        position: 'center',\n        backgroundColor: 'red',\n        timeout: 3000,\n        messageSize: '20',\n        messageLineHeight: '55',\n      });\n    } else {\n      startButton.disabled = false;\n      return userSelectedDate;\n    }\n    return timeRange;\n  },\n};\n\nflatpickr('#datetime-picker', options).calendarContainer.style.width = '320px';\n\nconst dayValues = document.querySelector('[data-days]');\nconst hourValues = document.querySelector('[data-hours]');\nconst minuteValues = document.querySelector('[data-minutes]');\nconst secondValues = document.querySelector('[data-seconds]');\nconst startButton = document.querySelector('button');\nconst inputArea = document.querySelector('#datetime-picker');\n\nstartButton.addEventListener('click', evt);\n\nfunction evt() {\n  if (userSelectedDate) {\n    inputArea.disabled = true;\n    startButton.disabled = true;\n\n    const intervalID = setInterval(toCountSeconds, 1000);\n\n    function toCountSeconds() {\n      const timerValues = convertMs(timeRange);\n      timeRange = timeRange - 1000;\n      dayValues.textContent = timerValues.days.toString().padStart(2, '0');\n      hourValues.textContent = timerValues.hours.toString().padStart(2, '0');\n      minuteValues.textContent = timerValues.minutes\n        .toString()\n        .padStart(2, '0');\n      secondValues.textContent = timerValues.seconds\n        .toString()\n        .padStart(2, '0');\n      if (timeRange <= 0) {\n        clearInterval(intervalID);\n        inputArea.disabled = false;\n        flatpickr('#datetime-picker', options).calendarContainer.style.width =\n          '320px';\n      }\n    }\n  }\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["userSelectedDate","timeRange","options","selectedDates","dateStr","instance","startButton","iziToast","flatpickr","dayValues","hourValues","minuteValues","secondValues","inputArea","evt","toCountSeconds","timerValues","convertMs","intervalID","ms","days","hours","minutes","seconds"],"mappings":"+IAMA,IAAIA,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAS,SAAUC,EAAeC,EAASC,EAAU,CACnDA,EAAS,MAAM,MAAQ,aACxB,EAED,QAAQF,EAAe,CAIrB,GAHAH,EAAmBG,EAAc,CAAC,EAClCF,EAAYD,EAAiB,QAAO,EAAK,IAAI,KAAI,EAAG,UAEhDC,GAAa,EACfK,EAAY,SAAW,GACvBC,EAAS,KAAK,CACZ,QAAS,qCACT,SAAU,SACV,gBAAiB,MACjB,QAAS,IACT,YAAa,KACb,kBAAmB,IAC3B,CAAO,MAED,QAAAD,EAAY,SAAW,GAChBN,EAET,OAAOC,CACR,CACH,EAEAO,EAAU,mBAAoBN,CAAO,EAAE,kBAAkB,MAAM,MAAQ,QAEvE,MAAMO,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EACtDN,EAAc,SAAS,cAAc,QAAQ,EAC7CO,EAAY,SAAS,cAAc,kBAAkB,EAE3DP,EAAY,iBAAiB,QAASQ,CAAG,EAEzC,SAASA,GAAM,CACb,GAAId,EAAkB,CAMpB,IAASe,EAAT,UAA0B,CACxB,MAAMC,EAAcC,EAAUhB,CAAS,EACvCA,EAAYA,EAAY,IACxBQ,EAAU,YAAcO,EAAY,KAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACnEN,EAAW,YAAcM,EAAY,MAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACrEL,EAAa,YAAcK,EAAY,QACpC,SAAU,EACV,SAAS,EAAG,GAAG,EAClBJ,EAAa,YAAcI,EAAY,QACpC,SAAU,EACV,SAAS,EAAG,GAAG,EACdf,GAAa,IACf,cAAciB,CAAU,EACxBL,EAAU,SAAW,GACrBL,EAAU,mBAAoBN,CAAO,EAAE,kBAAkB,MAAM,MAC7D,QAEL,EAtBDW,EAAU,SAAW,GACrBP,EAAY,SAAW,GAEvB,MAAMY,EAAa,YAAYH,EAAgB,GAAI,CAoBpD,CACH,CAEA,SAASE,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}